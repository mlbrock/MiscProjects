// ////////////////////////////////////////////////////////////////////////////
// ////////////////////////////////////////////////////////////////////////////
// Necessary include files...
// ////////////////////////////////////////////////////////////////////////////
include("TDW/_D2JSP_Utility.d2l");

includeonce("TDW/_D2JSP_States.d2l");
includeonce("TDW/ISF.d2l");
// ////////////////////////////////////////////////////////////////////////////

// ////////////////////////////////////////////////////////////////////////////
function main()
{
	var my_log     = new D2JSP_UTIL_Log("output/TDW_DumpISF." + me.realm +
		"." + me.account + "." + me.name + ".log", "DumpISF");
	var error_list = new Array();
	var isf_cfg;

	D2JSP_UTIL_GEN_CheckGameReady();

	my_log.logInfo("Attempting to load your ISF configuration file...");
	if (!(isf_cfg = ISF_Create(null, 0, error_list))) {
		while (error_list.length)
			my_log.logError(error_list.shift());
		my_log.logError("Load of ISF configuration file failed.");
	}
	else {
		my_log.logInfo("Load of ISF configuration file completed.");
		var spec_count = isf_cfg.getSpecCount();
		for (var count_1 = 0; count_1 < spec_count; count_1++) {
			my_log.logInfoQuiet(isf_cfg.getSpecString(count_1));
			my_log.logInfoQuiet(isf_cfg.getSpecText(count_1));
			my_log.logInfoQuiet(isf_cfg.getSpec(count_1));
			my_log.emitSep("-");
		}
	}

	my_log.closeLog();

	print("Done");

}
// ////////////////////////////////////////////////////////////////////////////

// ////////////////////////////////////////////////////////////////////////////
function hostilemsgHandler()
{
	runGC();
}
// ////////////////////////////////////////////////////////////////////////////

// ////////////////////////////////////////////////////////////////////////////
function partymsgHandler()
{
	runGC();
}
// ////////////////////////////////////////////////////////////////////////////

// ////////////////////////////////////////////////////////////////////////////
function gamemsgHandler()
{
	runGC();
}
// ////////////////////////////////////////////////////////////////////////////

// ////////////////////////////////////////////////////////////////////////////
function keypressHandler()
{
	runGC();
}
// ////////////////////////////////////////////////////////////////////////////


